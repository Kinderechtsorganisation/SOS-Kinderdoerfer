import{u as v,a as P,o as O,c as i,b as N,r as L,d as V,e as E,f as U,g as x,h as B,i as I,j as T,k as C,l as k}from"./entry.0q7qStI1.js";import{u as Y}from"./storiesStore.DnfAre5K.js";import{u as D}from"./parameterStore.Dxg1pa_I.js";import{w as F,u as M}from"./asyncContext.BN7JU6Kd.js";import q from"./Wizard.Bw-4PVjD.js";import{r as d}from"./routeUtils.CNLPeGG_.js";import{r as H}from"./image.DnFe2Qmx.js";import{s as W}from"./breadcrumbs.nQAvAy00.js";import"./Headline.Bc4QI8G0.js";import"./TooltipWrapper.CvfqawJB.js";import"./mapBlok.DVokeng5.js";import"./viewportStore.CIdjoTgi.js";import"./SolutionResults.BskWnKe0.js";import"./SingleImage.VQXHtuVE.js";import"./client-only.CgloTKKH.js";import"./SolutionFinderStep.J9eRxl8I.js";import"./Selector.vsr7FizM.js";import"./modalStore.BbZhz-_g.js";const pt={__name:"[...slug]",async setup(z){let _,y;const c=I(),{slug:l}=v().params,g=v(),e=Y(),u=P(),p=D();e.anchors=[],e.regionAnchors=[];let s={};const S=t=>{e.colorVariant=t.content.color_variant||T,e.hideFloatingbar=t.content.hide_floatingbar||!1,e.hideNavigation=t.content.hide_navigation||!1,e.hideBreadcrumb=t.content.hide_breadcrumb||!1,e.hideFooternavi=t.content.hide_footernavi||!1,e.hideFooterSeparator=t.content.hide_footer_separator||!1,e.currentStory=t,e.breadcrumbs=W(t.full_slug,u.links),e.currentPageType=t.content.page_type,typeof t.tag_list<"u"&&t.tag_list.length&&(e.currentTagList=t.tag_list||[])},$=async()=>{if(s=await M(l&&l.length>0?l.join("/"):"DE-de",{version:c.public.STORYBLOK_VERSION}).catch(t=>{throw k({statusCode:t.status,statusMessage:t.response,fatal:!0})}),s.value.status)throw k({statusCode:s.value.status,statusMessage:s.value.response,fatal:!0});e.stories[l.join("/")]=s.value,S(s.value)};e.stories&&e.stories[l.join("/")]?(s=e.stories[l.join("/")],S(s)):([_,y]=F(()=>$()),await _,y()),O(()=>{if(u.searchActive=!1,Object.keys(p.getParams).length===0&&!(g&&g.query&&Object.keys(g.query).length!==0)){const o=document.cookie.match("(^|;)?utms=([^;]*)(;|$)");o&&(p.params=JSON.parse(o[2]))}const t=Object.fromEntries(new URLSearchParams(window.location.search));Object.prototype.hasOwnProperty.call(t,"sfcampaign_ID")&&(p.campaignId=t.sfcampaign_ID,delete t.sfcampaign_ID),Object.keys(t).length>=1&&t.constructor===Object&&(p.params=t)});const b=i(()=>{let t=`${e.currentStory.name} | PAYONE`;if(e.currentStory.content.SEO&&e.currentStory.content.SEO.title){const o=e.currentStory.content.SEO.title;t=o.endsWith("| PAYONE")?o:`${o} | PAYONE`}return t}),m=i(()=>d(`${c.public.SERVER_URL}/${e.currentStory.full_slug}`)),h=i(()=>(e.currentStory.alternates||[]).map(o=>{let n="";if(o.published===!1||u.seoRobots.includes(o.id)||(n=o.full_slug.split("/")[0],!n))return null;n=n.toLowerCase();const[a,r]=n.split("-");return{locale:n,lang:r,country:a.toUpperCase(),href:`${c.public.SERVER_URL}/${o.full_slug}`}}).filter(o=>!!o)),w=i(()=>{const t=[];t.push({rel:"canonical",href:m.value}),e.currentStory.content.seo_robots||h.value.forEach(r=>{t.push({rel:"alternate",hreflang:`${r.lang}-${r.country}`,href:d(r.href)})});const o=(e.currentStory.full_slug.split("/")[0]||"").toLowerCase(),[n,a]=o.split("-");if(!e.currentStory.content.seo_robots){let r=m.value;if(o!=="de-de"){const f=h.value.find(A=>A.locale==="de-de");r=f?f.href:r}t.push({rel:"alternate",hreflang:"x-default",href:d(r)}),t.push({rel:"alternate",hreflang:`${a}-${n.toUpperCase()}`,href:m})}return t}),R=i(()=>{const t=(e.currentStory.full_slug.split("/")[0]||"").toLowerCase(),[o,n]=t.split("-"),a=[{property:"og:url",content:m.value},{property:"og:type",content:"website"},{property:"og:site_name",content:"PAYONE"},{property:"og:article:author",content:e.currentStory.content.seo_author||"PAYONE"},{property:"og:locale",content:`${n}_${o.toUpperCase()}`},...h.value.map(r=>({property:"og:locale:alternate",content:`${r.lang}_${r.country}`}))];if(e.currentStory.content.seo_robots?a.push({name:"robots",content:"noindex"}):a.push({name:"robots",content:"index, follow"}),e.currentStory.content.SEO){const r=e.currentStory.content.SEO,f=r.og_image?H(r.og_image.replace(/^https?:/,"")):`${c.public.SERVER_URL}/payone-logo.png`;a.push({property:"og:title",content:r.og_title||r.title||b}),a.push({property:"og:description",content:r.og_description||r.description}),a.push({property:"og:image",content:f})}return a});return N({title:b,bodyAttrs:{class:e.colorVariant},meta:[...R.value],link:w,htmlAttrs:{lang:u.locale}}),(t,o)=>{const n=L("StoryblokComponent");return C(),V("div",null,[E(s)?(C(),U(n,{key:0,blok:E(s).content},null,8,["blok"])):x("",!0),B(q,{name:"solution-finder"})])}}};export{pt as default};
