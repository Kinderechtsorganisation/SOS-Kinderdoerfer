import{_ as y,n as p,O as o,K as S,L as d,k as a,d as c,f as u,w as r,aj as _,g as v,h as m,y as w,V as h,s as k,v as L,ak as j}from"./entry.0q7qStI1.js";import{_ as C}from"./client-only.CgloTKKH.js";import{r as g,g as E}from"./image.DnFe2Qmx.js";import{u as O}from"./viewportStore.CIdjoTgi.js";const q={props:{blok:{required:!0,type:Object},objectFit:{required:!1,type:Object,default:()=>({enable:!1,size:"cover",position:"center"})},caption:{type:String,default:""},rounded:{required:!1,type:String,default:""},missingImageClass:{default:null,type:[String,Array]},breakpoint:{required:!1,default:"lg",type:String},ignoreOrientation:{required:!1,default:!1,type:Boolean}},emits:["imageLoaded"],data(){return{isServer:!1,imageLoaded:!1}},computed:{...p(O,["vp"]),imgClasses(){const e=[];return this.blok.rounded_corners&&e.push("rounded-base"),this.rounded&&e.push(`rounded-${this.rounded}`),e},hasAttrShow(){return this.$attrs.show?!0:Object.hasOwn(this.$attrs,"show")&&typeof this.$attrs.show=="string"&&this.$attrs.show.length===0},imgStyles(){var s;if(!((s=this.objectFit)!=null&&s.enable))return null;const e=this.objectFit.size==="cover"?"100%":"auto";return{objectFit:this.objectFit.size,objectPosition:this.objectFit.position,width:"100%",height:e}},mobileImageSrc(){let e=this.blok.image_mobile||this.blok.image;return e=`${g(e)}/m/576x0/filters:quality(70)`,e},imageSrc(){let e=this.vp.bpMinWidth<o[this.breakpoint]?this.blok.image_mobile||this.blok.image:this.blok.image;!this.ignoreOrientation&&this.vp.orientation==="landscape"&&(e=this.blok.image),e=g(e);const{width:s}=E(e);let t=this.vp.bpMinWidth>o.sm?this.vp.bpMinWidth:o.sm;return t=Math.min(t,s),e+=`/m/${t}x0/filters:quality(70)`,e}},mounted(){this.$nextTick(()=>{this.bindEvents()})},beforeUnmount(){this.unbindEvents()},methods:{bindEvents(){Array.prototype.forEach.call(this.$el.querySelectorAll("img"),e=>{this.$nextTick(()=>{!e||!e.complete||this.$emit("imageLoaded")}),e.addEventListener("load",this.onLoad)})},unbindEvents(){Array.prototype.forEach.call(this.$el.querySelectorAll("img"),e=>e.removeEventListener("load",this.onLoad))},onLoad(e){this.imageLoaded=!0,e.currentTarget.src&&e.currentTarget.src.indexOf(this.imageSrc)>-1&&(this.$emit("imageLoaded"),this.unbindEvents())}}},z={key:0};function A(e,s,t,F,n,i){const l=j,f=C,b=S("editable");return d((a(),c("div",{class:r(["image",n.imageLoaded?"":t.missingImageClass])},[i.hasAttrShow?d((a(),u(l,{key:0,class:r(i.imgClasses),src:i.mobileImageSrc,alt:t.blok.alt,fluid:"","fluid-grow":e.$attrs&&e.$attrs["fluid-grow"]},null,8,["class","src","alt","fluid-grow"])),[[_,n.isServer]]):v("",!0),m(f,null,{default:w(()=>[t.caption?(a(),c("figure",z,[m(l,{class:r(i.imgClasses),style:h(i.imgStyles),src:i.imageSrc,alt:t.blok.alt,lazy:!i.hasAttrShow,fluid:"","fluid-grow":e.$attrs&&e.$attrs["fluid-grow"]},null,8,["class","style","src","alt","lazy","fluid-grow"]),k("figcaption",null,L(t.caption),1)])):(a(),u(l,{key:1,class:r(i.imgClasses),style:h(i.imgStyles),src:i.imageSrc,alt:t.blok.alt,lazy:!i.hasAttrShow,fluid:"","fluid-grow":e.$attrs&&e.$attrs["fluid-grow"]},null,8,["class","style","src","alt","lazy","fluid-grow"]))]),_:1})],2)),[[b,t.blok]])}const V=y(q,[["render",A],["__scopeId","data-v-c0127d87"]]);export{V as default};
